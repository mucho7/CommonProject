# FE(세션) 에러 시나리오

| 시나리오 타입         | 설명                                       | 해결 방안                                                            | 경과       |
| --------------- | ---------------------------------------- | ---------------------------------------------------------------- | -------- |
| 예러/예외           | 자세하게                                     |                                                                  | 해결했는지 여부 |
| 에러(세션 생성)       | 이미 만든 세션 방이 있는데 또 생성을 시도하는 경우 실패해야 한다    | 백엔드로부터 해당하는 오류 메세지를 받으면 생성 실패 알림창을 띄우고, 메인 화면으로 리다이렉트한다.         |          |
| 에러(세션 정보 수정)    | 수정 도중 해당 세션이 삭제된 경우                      | 백엔드로부터 해당하는 오류 메세지를 받으면 세션 삭제 알림창을 띄우고, 세션 목록 페이지로 리다이렉트한다.      |          |
| 에러(세션 수정)       | DB에서 수정에 실패한 경우                          | 백엔드로부터 해당하는 오류 메세지를 받으면 수정 실패 알림창을 띄우고, 세션 상세 정보(대기방) 페이지로 리다이렉트 |          |
| 에러(세션 삭제)       | 삭제하려는 도중 해당 세션이 이미 삭제된 경우                | 백엔드로부터 해당하는 오류 메세지를 받으면 세션 삭제 알림창을 띄우고, 세션 목록 페이지로 리다이렉트한다.      |          |
| 에러(세션 삭제)       | DB에서 삭제에 실패한 경우                          | 백엔드로부터 해당하는 오류 메세지를 받으면 삭제 실패 알림창을 띄우고, 세션 상세 정보(대기방) 페이지로 리다이렉트 |          |
| 에러(세션 조회)       | 입장하려는 도중 해당 세션이 이미 삭제된 경우                | 백엔드로부터 해당하는 오류 메세지를 받으면 세션 삭제 알림창을 띄우고 세션 목록 페이지로 리다이렉트          |          |
| 에러(세션 조회)       | 세션 대기방 페이지에 있는 도중 세션이 삭제되고, 이후 새로고침하는 경우 | 세션 삭제 알림창을 띄우고 세션 목록 페이지로 리다이렉트                                  |          |
| 에러(세션 조회)       | 세션 참여 도중 로그아웃하는 경우                       | 로그아웃 알림창을 띄우고 세션 화면에서 나간다                                        |          |
| 에러(세션 - 공유 IDE) | 여러 명이 공유 IDE의 같은 부분을 동시에 수정하는 경우?        | ?                                                                |          |
| 에러(세션 - 권한 설정)  | 권한 설정 도중 해당 사용자가 세션을 나가는 경우              | 권한 설정 창에 해당 사용자 정보 지우고 설정하려던 권한은 원래 설정되어 있던 대로 되돌린다              |          |

### WebRTC 관련 권한 겹치는 문제 or 동작 꼬이는 문제 예상

다음주에 에러 시나리오로 정리

1. 컴파일(*시각화랑 기능 합치기)
   1. A가 컴파일하면서 동시에 B가 IDE 수정
      1. 동작은 가능, 원하는 코드 상태에서 컴파일되려면 참여자들 사이에 소통해야함
   2. A, B가 동시에 컴파일에 접근
      1. (컴파일 영역을 공유할 경우) 소통으로 순서 정하기 or 권한을 한 명(+호스트)만 가질수 있도록 제한
      2. (공유하지 않을 경우) 각자 사용하는 공간이므로 상관 X
2. 그림판
   1. 여러 명이 동시에 그리기 도구 사용
      1. IDE 화면 위에 띄우는 그림판 레이어를 사용자별로 생성 → 일단 이쪽으로
      2. 한 번에 한 명만 그릴 수 있게 권한 제한
   2. A가 그림판 사용 중에 B가 IDE 수정 시도
      1. 불가능하게 하기
      2. 가능하게 할 경우, 그림판 레이어 밑에 있는 IDE 화면을 선택할 수 있는 방법 생각
3. 여러 명이 동시에 IDE 수정
   1. 동시에 타이핑 할 때 webRTC 서버를 거쳐서 다른 사용자에게 전달되는 과정에서 정보 누락 될 수 있을 거 같음 → 메세지 큐 학습, 관련 라이브러리 있는지 찾아보기
4. 세션 참여 도중 로그아웃하는 경우
   1. 세션 나가지도록 하고, 알림창 띄우기
5. 권한 보유 인원수 제한 걸 경우
   1. 다른 사용자에게 권한 부여 하면 자동으로 기존 권한 보유자로부터 권한 회수
6. 그림판, 컴파일 기능 사용중 세션 나가는 경우
   1. 기능 사용 중 생성된 정보 초기화
7. 권한에 관한 정보 저장할 위치

### 세션 CRUD

- 생성: 로그인한 사용자만 가능. 비로그인 사용자가 만들기 버튼 누를시 로그인 페이지로 리다이렉트하고, 로그인 완료되면 다시 만들기 창으로? 이미 자신이 만든 방이 있을 경우 생성 불가(백엔드에서 검증?)
- 조회: 단순 조회는 아무 사용자나 가능, 로그인 사용자는 참여 버튼 클릭시 해당 세션 페이지로 이동, 비로그인 사용자는 참여 버튼 클릭시 로그인 페이지로 리다이렉트
- 수정, 삭제: 해당 세션 호스트(생성자)만 가능, 사용자 정보 일치할 때만 상세정보 페이지에 삭제 /수정 버튼 표시
